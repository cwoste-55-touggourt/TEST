<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body {
  font-family: Cairo, sans-serif;
  background: #f4f6fb;
  margin: 0;
  padding: 20px;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

h2 { color: #0d47a1; margin: 0; }

button {
  padding: 10px 14px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
  font-family: Cairo;
  font-weight: 600;
}

.add { background: #1976d2; color: white; }
.edit { background: #ffca28; }
.delete { background: #ef5350; color: white; }

table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  border-radius: 14px;
  overflow: hidden;
  box-shadow: 0 6px 20px rgba(0,0,0,.1);
}

th {
  background: #1976d2;
  color: white;
  padding: 12px;
}

td {
  padding: 10px;
  border-bottom: 1px solid #eee;
  font-size: 14px;
}

tr:hover { background: #e3f2fd; }

.actions button {
  margin: 2px;
}
</style>
</head>

<body>

<header>
  <h2>Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h2>
  <button class="add" onclick="openAdd()">â• Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù</button>
</header>

<table>
<thead>
<tr>
  <th>Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙ</th>
  <th>Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</th>
  <th>Ø§Ù„Ø§Ø³Ù…</th>
  <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø²Ø¯ÙŠØ§Ø¯</th>
  <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙˆØ¸ÙŠÙ</th>
  <th>Ø§Ù„Ø±ØªØ¨Ø©</th>
  <th>Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„</th>
  <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getFirestore,
  collection,
  getDocs,
  setDoc,
  updateDoc,
  deleteDoc,
  doc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* ğŸ”¥ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase */
const firebaseConfig = {
  apiKey: "AIzaSyAkQz9pB2ZNlYIvdlTRvi4try3D8LLXS4g",
  authDomain: "databaseemploye.firebaseapp.com",
  projectId: "databaseemploye"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const tbody = document.getElementById("tableBody");

/* ===== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ===== */
async function loadData() {
  tbody.innerHTML = "";
  const snap = await getDocs(collection(db, "employeescom"));

  snap.forEach(docu => {
    const d = docu.data();
    const tr = document.createElement("tr");

    tr.innerHTML = `
      <td>${docu.id}</td>
      <td>${d.id || ""}</td>
      <td>${d.name || ""}</td>
      <td>${d.diz || ""}</td>
      <td>${d.dtw || ""}</td>
      <td>${d.grade || ""}</td>
      <td>${d.place || ""}</td>
      <td class="actions">
        <button class="edit" onclick="editEmp('${docu.id}')">âœï¸</button>
        <button class="delete" onclick="delEmp('${docu.id}')">ğŸ—‘ï¸</button>
      </td>
    `;
    tbody.appendChild(tr);
  });
}

loadData();

/* ===== Ø¥Ø¶Ø§ÙØ© ===== */
window.openAdd = async () => {
  const id = prompt("Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙ (Ø³ÙŠÙƒÙˆÙ† ID):");
  if (!id) return;

  const data = {
    id: prompt("Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ:"),
    name: prompt("Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:"),
    diz: prompt("ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø²Ø¯ÙŠØ§Ø¯:"),
    dtw: prompt("ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙˆØ¸ÙŠÙ:"),
    grade: prompt("Ø§Ù„Ø±ØªØ¨Ø© / Ø§Ù„ÙˆØ¸ÙŠÙØ©:"),
    place: prompt("Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„:")
  };

  await setDoc(doc(db, "employeescom", id), data);
  loadData();
};

/* ===== ØªØ¹Ø¯ÙŠÙ„ ===== */
window.editEmp = async (docId) => {
  const ref = doc(db, "employeescom", docId);

  const data = {
    id: prompt("Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ:"),
    name: prompt("Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:"),
    diz: prompt("ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø²Ø¯ÙŠØ§Ø¯:"),
    dtw: prompt("ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙˆØ¸ÙŠÙ:"),
    grade: prompt("Ø§Ù„Ø±ØªØ¨Ø© / Ø§Ù„ÙˆØ¸ÙŠÙØ©:"),
    place: prompt("Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„:")
  };

  await updateDoc(ref, data);
  loadData();
};

/* ===== Ø­Ø°Ù ===== */
window.delEmp = async (docId) => {
  if (!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ")) return;
  await deleteDoc(doc(db, "employeescom", docId));
  loadData();
};

</script>

</body>
</html>
